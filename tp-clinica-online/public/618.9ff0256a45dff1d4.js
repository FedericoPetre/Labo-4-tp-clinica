"use strict";(self.webpackChunktp_clinica_online=self.webpackChunktp_clinica_online||[]).push([[618],{8618:(ni,h,p)=>{p.r(h),p.d(h,{TurnosModuleModule:()=>ei});var u=p(6814),g=p(7045),i=p(5879),f=p(6683),T=p(5367),_=p(6013);function x(s,c){if(1&s){const t=i.EpF();i.TgZ(0,"button",12),i.NdJ("click",function(){const o=i.CHM(t).$implicit,a=i.oxw();return i.KtG(a.cargarEspecialidadesEspecialista(o.nombre))}),i.TgZ(1,"div",13)(2,"span",14),i._uU(3),i.qZA(),i._UZ(4,"img",15),i.qZA()()}if(2&s){const t=c.$implicit;i.xp6(3),i.Oqu(t.nombre),i.xp6(1),i.Q6J("src",t.foto,i.LSH)}}function E(s,c){if(1&s){const t=i.EpF();i.TgZ(0,"button",12),i.NdJ("click",function(){const o=i.CHM(t).$implicit,a=i.oxw();return i.KtG(a.mostrarTurnosDisponibles(o))}),i._uU(1),i.qZA()}if(2&s){const t=c.$implicit;i.xp6(1),i.Oqu(t)}}function Z(s,c){if(1&s){const t=i.EpF();i.TgZ(0,"button",16),i.NdJ("click",function(){const n=i.CHM(t),o=n.$implicit,a=n.index,r=i.oxw();return i.KtG(r.solicitarTurno(o,a))}),i._uU(1),i.qZA()}if(2&s){const t=c.$implicit;i.xp6(1),i.Oqu(t)}}let v=(()=>{class s{constructor(t,e,n){this.firebase=t,this.turnos=e,this.notificaciones=n,this.horariosDisponiblesEspecialistas=[],this.especialistas=[],this.especialidades=[],this.especialistasConFoto=[],this.horariosDisponiblesDeEseEspecialistaConEsaEspecialidad=[],this.especialistaElegido="",this.especialidadElegida="",this.pacientes=[]}ngOnInit(){this.obserEspecialistas$=this.firebase.traerEspecialistasRegistrados().subscribe(t=>{this.cargarEspecialistas(t)}),this.obser$=this.firebase.traerTodosLosHorariosEspecialistas().subscribe(t=>{this.cargarTurnos(t)}),"admin"==this.firebase.tipoUsuario&&(this.obserPacientes$=this.firebase.traerPacientesRegistrados().subscribe(t=>{this.cargarPacientes(t)}))}ngOnDestroy(){this.obser$&&this.obser$.unsubscribe(),this.obserEspecialistas$&&this.obserEspecialistas$.unsubscribe(),this.obserPacientes$&&this.obserPacientes$.unsubscribe()}cargarPacientes(t){let e=[];t.length>0&&t.forEach(n=>{e.push({nombre:n.nombre+" "+n.apellido,mailPaciente:n.email})}),this.pacientes=e}cargarEspecialidadesEspecialista(t){let e=[];this.especialistaElegido=t,this.horariosDisponiblesEspecialistas.forEach(n=>{n.especialista==t&&!e.includes(n.especialidad)&&e.push(n.especialidad)}),this.especialidades=e}cargarEspecialistas(t){let e=[];t.length>0&&t.forEach(n=>{let o={nombre:n.nombre+" "+n.apellido,foto:n.imagen[0]};e.includes(o)||e.push(o)}),this.especialistasConFoto=e}cargarTurnos(t){let e=[],o=[],a=[];t.length>0&&t.forEach(r=>{let d={nombre:r.especialista,foto:this.traerFotoDelEspecialista(r.especialista,this.especialistasConFoto)};if(o.some(m=>m.nombre===d.nombre)||o.push(d),a.includes(r.especialidad)||a.push(r.especialidad),r.dias.length>0){let m={especialista:r.especialista,especialidad:r.especialidad,duracionTurno:r.duracionTurno,horarios:this.turnos.devolverCalendarizacionTodosLosDias(r.dias,r.duracionTurno)};e.includes(m)||e.push(m)}}),this.especialistas=o,this.horariosDisponiblesEspecialistas=e}traerFotoDelEspecialista(t,e){let n="";return e.forEach(o=>{o.nombre==t&&(n=o.foto)}),n}mostrarTurnosDisponibles(t){this.obserTurnos$&&this.obserTurnos$.unsubscribe();let e=[];this.especialidadElegida=t;let n=[];this.obserTurnos$=this.firebase.traerTurnosOcupados(this.especialistaElegido,this.especialidadElegida).subscribe(o=>{this.cargarFechasOcupadas(o).forEach(a=>{n.push(a)}),this.horariosDisponiblesEspecialistas.forEach(a=>{a.especialista==this.especialistaElegido&&a.especialidad==t&&a.horarios.forEach(r=>{!e.includes(r)&&!n.includes(r)&&e.push(r)})})}),this.horariosDisponiblesDeEseEspecialistaConEsaEspecialidad=e}solicitarTurno(t,e){this.notificaciones.mostrarSpinner(),-1!=e&&this.horariosDisponiblesDeEseEspecialistaConEsaEspecialidad.splice(e,1),setTimeout(()=>{this.notificaciones.ocultarSpinner()},1500),this.firebase.flagEsAdmin||this.firebase.guardarTurnoParaElPaciente(this.firebase.nombreUsuario,this.firebase.email,this.especialistaElegido,this.especialidadElegida,t)}cargarFechasOcupadas(t){let e=[];return t.length>0&&t.forEach(n=>{e.push(n.diaTurno)}),e}static#i=this.\u0275fac=function(e){return new(e||s)(i.Y36(f.O),i.Y36(T.D),i.Y36(_.U))};static#t=this.\u0275cmp=i.Xpm({type:s,selectors:[["app-solicitar-turno"]],decls:19,vars:3,consts:[[1,"contenedorMayor"],[1,"contenedorMedio"],[1,"arriba"],[1,"izquierda"],["class","boton",3,"click",4,"ngFor","ngForOf"],[1,"derecha"],[1,"abajo"],[1,"turnos"],[1,"tituloTurnos"],[1,"tituloTurnos2"],[1,"botonesTurnos"],["class","boton2",3,"click",4,"ngFor","ngForOf"],[1,"boton",3,"click"],[1,"contenidoBoton"],[1,"nombreEspecialista"],["alt","Imagen del especialista",3,"src"],[1,"boton2",3,"click"]],template:function(e,n){1&e&&(i.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1"),i._uU(5,"Especialistas"),i.qZA(),i.YNc(6,x,5,2,"button",4),i.qZA(),i.TgZ(7,"div",5)(8,"h1"),i._uU(9,"Especialidad"),i.qZA(),i.YNc(10,E,2,1,"button",4),i.qZA()(),i.TgZ(11,"div",6)(12,"div",7)(13,"div",8)(14,"h2",9),i._uU(15,"Turnos Disponibles"),i.qZA()(),i._UZ(16,"br"),i.TgZ(17,"div",10),i.YNc(18,Z,2,1,"button",11),i.qZA()()()()()),2&e&&(i.xp6(6),i.Q6J("ngForOf",n.especialistas),i.xp6(4),i.Q6J("ngForOf",n.especialidades),i.xp6(8),i.Q6J("ngForOf",n.horariosDisponiblesDeEseEspecialistaConEsaEspecialidad))},dependencies:[u.sg],styles:['@import"https://fonts.googleapis.com/css2?family=Nunito:wght@500&display=swap";@import"https://fonts.googleapis.com/css2?family=DynaPuff&family=Sora&display=swap";.contenedorMayor[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:93vh;width:100%;background-size:100% 100%;background-image:url(pasillo-hospital.f860beb99e2338a8.jpg);background-repeat:no-repeat}.columna[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;text-align:left}.row[_ngcontent-%COMP%]{width:80vw}.contenedorMedio[_ngcontent-%COMP%]{width:85vw;height:80vh;border-radius:25px;display:flex;flex-direction:column}.arriba[_ngcontent-%COMP%], .abajo[_ngcontent-%COMP%]{display:flex;flex-direction:row;width:100%}.izquierda[_ngcontent-%COMP%], .derecha[_ngcontent-%COMP%]{width:50%;padding-top:5vh;display:flex;flex-direction:column;justify-content:flex-start;text-align:center;height:30vh;overflow-y:auto}.turnos[_ngcontent-%COMP%]{width:100%;height:50vh}.tituloTurnos[_ngcontent-%COMP%]{width:100%;height:2vh;text-align:center}.botonesTurnos[_ngcontent-%COMP%]{max-height:80%;width:auto;display:flex;flex-direction:column;justify-content:flex-start;text-align:center;overflow-y:auto;object-fit:contain}.row1[_ngcontent-%COMP%]{width:100%;height:4%;margin-top:10px;display:flex;justify-content:space-between}.izquierda[_ngcontent-%COMP%], .derecha[_ngcontent-%COMP%], .abajo[_ngcontent-%COMP%]{border-radius:30px;background-size:100% 100%;margin:10px;background-image:url(fondo-solicitar-turno.720eba8beca0c2af.png);background-repeat:no-repeat}img[_ngcontent-%COMP%]{height:16vh;width:auto;object-fit:cover;margin-left:20px;margin-right:20px}.img[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;text-align:center;width:60%;border-radius:20px;background-color:#00008b}.controlFormulario[_ngcontent-%COMP%]{width:100%}.boton[_ngcontent-%COMP%]{width:80%;height:auto;background-color:#00008b;color:#fff;border-radius:5px;box-shadow:2px 2px 2px 2px #fff;display:flex;flex-direction:column;align-items:center;justify-content:center;margin:0 auto}.contenidoBoton[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.nombreEspecialista[_ngcontent-%COMP%]{margin-bottom:5px}.boton[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100px;max-height:100px;object-fit:contain}.boton[_ngcontent-%COMP%]:hover{background-color:#001f3f}.boton2[_ngcontent-%COMP%]{width:auto;height:auto;background-color:#00008b;color:#fff;border-radius:5px;box-shadow:2px 2px 2px 2px #fff;display:block;margin:0 auto 10px}.boton2[_ngcontent-%COMP%]:hover, .boton[_ngcontent-%COMP%]:hover{background-color:#001f3f}h2[_ngcontent-%COMP%], label[_ngcontent-%COMP%]{color:#fff}label[_ngcontent-%COMP%]{font-family:Nunito,sans-serif;font-size:large}input[_ngcontent-%COMP%]{font-family:Nunito,sans-serif;font-size:medium}h2[_ngcontent-%COMP%]{font-family:Sora,sans-serif;margin-top:2vh}.tituloTurnos2[_ngcontent-%COMP%]{font-family:Nunito,sans-serif;color:#000}h1[_ngcontent-%COMP%]{font-family:Nunito,sans-serif}']})}return s})();var b=p(95);function y(s,c){if(1&s){const t=i.EpF();i.TgZ(0,"button",8),i.NdJ("click",function(){const o=i.CHM(t).$implicit,a=i.oxw(2);return i.KtG(a.filtrar(o))}),i._uU(1),i.qZA()}if(2&s){const t=c.$implicit;i.xp6(1),i.Oqu(t)}}function O(s,c){if(1&s&&(i.TgZ(0,"div",9)(1,"div")(2,"h1"),i._uU(3,"Filtrar por Especialista"),i.qZA()(),i.TgZ(4,"div",10),i.YNc(5,y,2,1,"button",6),i.qZA()()),2&s){const t=i.oxw();i.xp6(5),i.Q6J("ngForOf",t.especialistas)}}function P(s,c){if(1&s){const t=i.EpF();i.TgZ(0,"button",8),i.NdJ("click",function(){const o=i.CHM(t).$implicit,a=i.oxw(2);return i.KtG(a.filtrar(o))}),i._uU(1),i.qZA()}if(2&s){const t=c.$implicit;i.xp6(1),i.Oqu(t)}}function w(s,c){if(1&s&&(i.TgZ(0,"div",9)(1,"div")(2,"h1"),i._uU(3,"Filtrar por Paciente"),i.qZA()(),i.TgZ(4,"div",10),i.YNc(5,P,2,1,"button",6),i.qZA()()),2&s){const t=i.oxw();i.xp6(5),i.Q6J("ngForOf",t.pacientes)}}function M(s,c){if(1&s){const t=i.EpF();i.TgZ(0,"button",8),i.NdJ("click",function(){const o=i.CHM(t).$implicit,a=i.oxw(2);return i.KtG(a.filtrar(o))}),i._uU(1),i.qZA()}if(2&s){const t=c.$implicit;i.xp6(1),i.Oqu(t)}}function F(s,c){if(1&s&&(i.TgZ(0,"div",9)(1,"div")(2,"h1"),i._uU(3,"Filtrar por Especialista"),i.qZA()(),i.TgZ(4,"div",10),i.YNc(5,M,2,1,"button",6),i.qZA()()),2&s){const t=i.oxw();i.xp6(5),i.Q6J("ngForOf",t.especialistas)}}function k(s,c){if(1&s){const t=i.EpF();i.TgZ(0,"button",8),i.NdJ("click",function(){const o=i.CHM(t).$implicit,a=i.oxw();return i.KtG(a.filtrar(o))}),i._uU(1),i.qZA()}if(2&s){const t=c.$implicit;i.xp6(1),i.Oqu(t)}}let A=(()=>{class s{ngOnInit(){this.tipoUsuario=this.firebase.tipoUsuario,"paciente"==this.tipoUsuario&&(this.obser$=this.firebase.traerTurnosDelPaciente(this.firebase.email).subscribe(t=>{this.cargarEspecialistasYEspecialidades(t)})),"especialista"==this.tipoUsuario&&(this.obser$=this.firebase.traerTurnosDelEspecialista(this.firebase.nombreUsuario).subscribe(t=>{this.cargarPacientesYEspecialidades(t)})),"admin"==this.tipoUsuario&&(this.obser$=this.firebase.traerTodosLosTurnosRegistrados().subscribe(t=>{this.cargarEspecialistasYEspecialidades(t)}))}ngOnDestroy(){this.obser$&&this.obser$.unsubscribe()}constructor(t,e){this.firebase=t,this.turnos1=e,this.especialidadOEspecialista="",this.tipoUsuario="",this.misTurnos=[],this.especialistas=[],this.especialidades=[],this.pacientes=[],this.turnosFiltrados=[],this.eventItemMisTurnos=new i.vpe,this.flagHayCambios=!1}cargarTodosLosTurnos(t){let e=[],n=[],o=[];t.length>0&&t.forEach(a=>{let r={diaDelTurno:a.diaTurno,especialidad:a.especialidad,estado:a.estadoTurno,especialista:a.nombreEspecialista,fueRealizado:a.fueRealizado,resenia:a.resenia,calificacionAtencion:a.calificacionAtencion,comentarioCancelacion:a.comentarioCancelacion,paciente:a.paciente};e.push(r),n.includes(r.especialista)||n.push(r.especialista),o.includes(r.especialidad)||o.push(r.especialidad)}),this.misTurnos=e,this.especialidades=o,this.especialistas=n,this.buscarTurnosConEseFiltro()}cargarEspecialistasYEspecialidades(t){let e=[],n=[],o=[];t.length>0&&t.forEach(a=>{let r={diaDelTurno:a.diaTurno,especialidad:a.especialidad,estado:a.estadoTurno,especialista:a.nombreEspecialista,fueRealizado:a.fueRealizado,resenia:a.resenia,calificacionAtencion:a.calificacionAtencion,comentarioCancelacion:a.comentarioCancelacion,paciente:a.paciente};e.push(r),n.includes(r.especialista)||n.push(r.especialista),o.includes(r.especialidad)||o.push(r.especialidad)}),this.misTurnos=e,this.especialidades=o,this.especialistas=n,this.buscarTurnosConEseFiltro()}cargarPacientesYEspecialidades(t){let e=[],n=[],o=[];t.length>0&&t.forEach(a=>{let r={diaDelTurno:a.diaTurno,especialidad:a.especialidad,estado:a.estadoTurno,especialista:a.nombreEspecialista,fueRealizado:a.fueRealizado,resenia:a.resenia,calificacionAtencion:a.calificacionAtencion,comentarioCancelacion:a.comentarioCancelacion,paciente:a.paciente,mailPaciente:a.mailPaciente};e.push(r),n.includes(r.paciente)||n.push(r.paciente),o.includes(r.especialidad)||o.push(r.especialidad)}),this.misTurnos=e,this.especialidades=o,this.pacientes=n,this.buscarTurnosConEseFiltro()}buscarTurnosConEseFiltro(){this.turnosFiltrados=[],this.misTurnos.forEach("paciente"==this.tipoUsuario?t=>{(t.especialidad.toLowerCase().includes(this.especialidadOEspecialista.toLowerCase())||t.especialista.toLowerCase().includes(this.especialidadOEspecialista.toLowerCase()))&&this.turnosFiltrados.push(t)}:"especialista"==this.tipoUsuario?t=>{(t.especialidad.toLowerCase().includes(this.especialidadOEspecialista.toLowerCase())||t.paciente.toLowerCase().includes(this.especialidadOEspecialista.toLowerCase()))&&this.turnosFiltrados.push(t)}:t=>{(t.especialidad.toLowerCase().includes(this.especialidadOEspecialista.toLowerCase())||t.especialista.toLowerCase().includes(this.especialidadOEspecialista.toLowerCase()))&&this.turnosFiltrados.push(t)}),this.turnosFiltrados=this.turnosFiltrados.sort(this.turnos1.compararDiaDelTurno),console.log(this.turnosFiltrados),this.eventItemMisTurnos.emit(this.turnosFiltrados)}filtrar(t){this.especialidadOEspecialista=t,this.buscarTurnosConEseFiltro()}limpiarFiltro(){this.especialidadOEspecialista="",this.turnosFiltrados=this.misTurnos,this.eventItemMisTurnos.emit(this.turnosFiltrados)}static#i=this.\u0275fac=function(e){return new(e||s)(i.Y36(f.O),i.Y36(T.D))};static#t=this.\u0275cmp=i.Xpm({type:s,selectors:[["app-filtro-unico"]],inputs:{flagHayCambios:"flagHayCambios"},outputs:{eventItemMisTurnos:"eventItemMisTurnos"},decls:21,vars:5,consts:[[1,"contenedor"],[1,"filtro"],["type","text","placeholder","Ingrese especialidad o especialista",3,"ngModel","ngModelChange"],["class","filtroEspecialista",4,"ngIf"],[1,"filtroEspecialidad"],[1,"especialidades"],["class","boton",3,"click",4,"ngFor","ngForOf"],[1,"limpiarFiltros"],[1,"boton",3,"click"],[1,"filtroEspecialista"],[1,"especialistas"]],template:function(e,n){1&e&&(i.TgZ(0,"div",0)(1,"div",1)(2,"h1"),i._uU(3,"Filtro \xdanico"),i.qZA(),i.TgZ(4,"input",2),i.NdJ("ngModelChange",function(a){return n.especialidadOEspecialista=a})("ngModelChange",function(){return n.buscarTurnosConEseFiltro()}),i.qZA()(),i.YNc(5,O,6,1,"div",3),i.YNc(6,w,6,1,"div",3),i.YNc(7,F,6,1,"div",3),i.TgZ(8,"div",4)(9,"div")(10,"h1"),i._uU(11,"Filtrar por especialidad"),i.qZA()(),i.TgZ(12,"div",5),i.YNc(13,k,2,1,"button",6),i.qZA()(),i.TgZ(14,"div",7)(15,"div")(16,"h1"),i._uU(17,"Limpiar Filtros"),i.qZA()(),i.TgZ(18,"div")(19,"button",8),i.NdJ("click",function(){return n.limpiarFiltro()}),i._uU(20,"Limpiar Filtros"),i.qZA()()()()),2&e&&(i.xp6(4),i.Q6J("ngModel",n.especialidadOEspecialista),i.xp6(1),i.Q6J("ngIf","paciente"==n.tipoUsuario),i.xp6(1),i.Q6J("ngIf","especialista"==n.tipoUsuario),i.xp6(1),i.Q6J("ngIf","admin"==n.tipoUsuario),i.xp6(6),i.Q6J("ngForOf",n.especialidades))},dependencies:[u.sg,u.O5,b.Fj,b.JJ,b.On],styles:['@import"https://fonts.googleapis.com/css2?family=Nunito:wght@500&display=swap";@import"https://fonts.googleapis.com/css2?family=DynaPuff&family=Sora&display=swap";.contenedor[_ngcontent-%COMP%]{width:100%;height:93vh;background-size:100% 100%;background-repeat:no-repeat;background-image:url(pasillo-hospital.f860beb99e2338a8.jpg);display:flex;flex-direction:column;justify-content:flex-start;text-align:center;align-items:center;padding-top:7vh}h1[_ngcontent-%COMP%]{margin-top:5%;font-family:Nunito,sans-serif}input[_ngcontent-%COMP%]{width:75%;height:auto;border-radius:5%;box-shadow:2px 2px 2px 2px #fff;display:block;margin:0 auto 10px;font-family:Nunito,sans-serif;font-size:large}.boton[_ngcontent-%COMP%]{width:auto;height:auto;background-color:#00008b;color:#fff;border-radius:5px;box-shadow:2px 2px 2px 2px #fff;display:block;margin:0 auto 10px}.boton[_ngcontent-%COMP%]:hover{background-color:#001f3f}.especialistas[_ngcontent-%COMP%]{max-height:17vh;overflow-y:auto}.especialistas[_ngcontent-%COMP%]::-webkit-scrollbar{width:10px}.especialistas[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#00008b;border-radius:6px}.especialistas[_ngcontent-%COMP%]::-webkit-scrollbar-track{background-color:#f1f1f1}.especialidades[_ngcontent-%COMP%]{max-height:17vh;overflow-y:auto}.especialidades[_ngcontent-%COMP%]::-webkit-scrollbar{width:10px}.especialidades[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#00008b;border-radius:6px}.especialidades[_ngcontent-%COMP%]::-webkit-scrollbar-track{background-color:#f1f1f1}.filtro[_ngcontent-%COMP%], .filtroEspecialista[_ngcontent-%COMP%], .filtroEspecialidad[_ngcontent-%COMP%], .limpiarFiltros[_ngcontent-%COMP%]{background-repeat:no-repeat;background-image:url(fondo-solicitar-turno.720eba8beca0c2af.png);background-size:100% 100%;border-radius:20px;margin-bottom:1vh;margin-top:1vh;padding-left:1vh;padding-right:1vh}']})}return s})();var l=p(5861);function U(s,c){1&s&&(i.TgZ(0,"button",13),i._uU(1,"Completar Encuesta"),i.qZA())}function q(s,c){if(1&s){const t=i.EpF();i.TgZ(0,"button",14),i.NdJ("click",function(){i.CHM(t);const n=i.oxw().$implicit,o=i.oxw();return i.KtG(o.verResenia(n.resenia))}),i._uU(1,"Ver Rese\xf1a"),i.qZA()}}function N(s,c){if(1&s){const t=i.EpF();i.TgZ(0,"button",15),i.NdJ("click",function(){i.CHM(t);const n=i.oxw().$implicit,o=i.oxw();return i.KtG(o.calificarTurno(n))}),i._uU(1,"Calificar Atenci\xf3n"),i.qZA()}}function J(s,c){if(1&s){const t=i.EpF();i.TgZ(0,"button",16),i.NdJ("click",function(){i.CHM(t);const n=i.oxw().$implicit,o=i.oxw();return i.KtG(o.cancelarTurno(n))}),i._uU(1,"Cancelar Turno"),i.qZA()}}function D(s,c){if(1&s){const t=i.EpF();i.TgZ(0,"button",14),i.NdJ("click",function(){i.CHM(t);const n=i.oxw().$implicit,o=i.oxw();return i.KtG(o.verResenia(n.comentarioCancelacion))}),i._uU(1,"Ver Comentario"),i.qZA()}}function $(s,c){if(1&s&&(i.TgZ(0,"tr")(1,"td",6),i._uU(2),i.qZA(),i.TgZ(3,"td",6),i._uU(4),i.qZA(),i.TgZ(5,"td",6),i._uU(6),i.qZA(),i.TgZ(7,"td",6),i._uU(8),i.qZA(),i.TgZ(9,"td",7)(10,"div",8),i.YNc(11,U,2,0,"button",9),i.YNc(12,q,2,0,"button",10),i.YNc(13,N,2,0,"button",11),i.YNc(14,J,2,0,"button",12),i.YNc(15,D,2,0,"button",10),i.qZA()()()),2&s){const t=c.$implicit;i.xp6(2),i.Oqu(t.especialidad),i.xp6(2),i.Oqu(t.especialista),i.xp6(2),i.hij("",t.diaDelTurno,"hs"),i.xp6(2),i.Oqu(t.estado),i.xp6(3),i.Q6J("ngIf","completado"==t.estado&&""!=t.resenia),i.xp6(1),i.Q6J("ngIf",""!=t.resenia),i.xp6(1),i.Q6J("ngIf","finalizado"==t.estado&&""==t.calificacionAtencion),i.xp6(1),i.Q6J("ngIf","false"==t.fueRealizado&&"aceptado"==t.estado||"pendiente"==t.estado),i.xp6(1),i.Q6J("ngIf",""!=t.comentarioCancelacion)}}let z=(()=>{class s{constructor(t,e){this.notificaciones=t,this.firebase=e,this.misTurnosPaciente=[]}cancelarTurno(t){var e=this;return(0,l.Z)(function*(){if((yield e.notificaciones.mostrarConfirmacion("Cancelar Turno","\xbfEst\xe1s seguro de cancelar el turno?")).isConfirmed){let o=yield e.notificaciones.mostrarConfirmacionConTexto("Cancelar Turno","\xbfPor qu\xe9 est\xe1 cancelando el turno?");null==o&&(o="");let a="";e.firebase.cancelarTurnoPaciente(t.especialidad,t.especialista,t.paciente,o,t.diaDelTurno).then(r=>{a=r,"Se han cancelado el turno"!=a?e.notificaciones.mostrarError("Error",a):e.notificaciones.mostrarExito("\xc9xito",a)})}})()}verResenia(t){var e=this;return(0,l.Z)(function*(){yield e.notificaciones.mostrarMensajeSwal("",t)})()}calificarTurno(t){var e=this;return(0,l.Z)(function*(){let n=yield e.notificaciones.mostrarConfirmacionConTexto("Calificar Atenci\xf3n","\xbfQu\xe9 te pareci\xf3 el servicio?");null==n&&(n="");let o="";e.firebase.agregarCalificacionServicio(t.especialidad,t.especialista,t.paciente,n,t.diaDelTurno).then(a=>{o=a,"Se ha calificado el turno"!=o?e.notificaciones.mostrarError("Error",o):e.notificaciones.mostrarExito("\xc9xito",o)})})()}static#i=this.\u0275fac=function(e){return new(e||s)(i.Y36(_.U),i.Y36(f.O))};static#t=this.\u0275cmp=i.Xpm({type:s,selectors:[["app-tabla-turnos-paciente"]],inputs:{misTurnosPaciente:"misTurnosPaciente"},decls:18,vars:1,consts:[[1,"h-80","d-flex","justify-content-center","align-items-center","text-white","rounded-3"],[1,"text-center"],[1,"table-responsive"],[1,"table","table-bordered","table-hover","table-dark","align-middle"],["colspan","4"],[4,"ngFor","ngForOf"],[1,"table-dark"],["colspan","4",1,"table-dark"],[1,"d-flex","flex-column"],["class","btn btn-primary mb-1",4,"ngIf"],["class","btn btn-info mb-1",3,"click",4,"ngIf"],["class","btn btn-success mb-1",3,"click",4,"ngIf"],["class","btn btn-danger mb-1",3,"click",4,"ngIf"],[1,"btn","btn-primary","mb-1"],[1,"btn","btn-info","mb-1",3,"click"],[1,"btn","btn-success","mb-1",3,"click"],[1,"btn","btn-danger","mb-1",3,"click"]],template:function(e,n){1&e&&(i.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"table",3)(4,"thead")(5,"tr")(6,"td"),i._uU(7,"Especialidad"),i.qZA(),i.TgZ(8,"td"),i._uU(9,"Especialista"),i.qZA(),i.TgZ(10,"td"),i._uU(11,"Fecha y hora"),i.qZA(),i.TgZ(12,"td"),i._uU(13,"Estado del Turno"),i.qZA(),i.TgZ(14,"td",4),i._uU(15,"Acciones"),i.qZA()()(),i.TgZ(16,"tbody"),i.YNc(17,$,16,9,"tr",5),i.qZA()()()()()),2&e&&(i.xp6(17),i.Q6J("ngForOf",n.misTurnosPaciente))},dependencies:[u.sg,u.O5],styles:['@import"https://fonts.googleapis.com/css2?family=Nunito:wght@500&display=swap";@import"https://fonts.googleapis.com/css2?family=DynaPuff&family=Sora&display=swap";td[_ngcontent-%COMP%]{color:#fff;font-family:Nunito,sans-serif;font-size:large}table[_ngcontent-%COMP%]{width:100%}.rating-container[_ngcontent-%COMP%]{text-align:center;padding:20px}']})}return s})();function I(s,c){if(1&s){const t=i.EpF();i.TgZ(0,"button",13),i.NdJ("click",function(){i.CHM(t);const n=i.oxw().$implicit,o=i.oxw();return i.KtG(o.aceptarTurno(n))}),i._uU(1,"Aceptar Turno"),i.qZA()}}function Y(s,c){if(1&s){const t=i.EpF();i.TgZ(0,"button",14),i.NdJ("click",function(){i.CHM(t);const n=i.oxw().$implicit,o=i.oxw();return i.KtG(o.rechazarTurno(n))}),i._uU(1,"Rechazar Turno"),i.qZA()}}function H(s,c){if(1&s){const t=i.EpF();i.TgZ(0,"button",15),i.NdJ("click",function(){i.CHM(t);const n=i.oxw().$implicit,o=i.oxw();return i.KtG(o.finalizarTurno(n))}),i._uU(1,"Finalizar Turno"),i.qZA()}}function j(s,c){if(1&s){const t=i.EpF();i.TgZ(0,"button",15),i.NdJ("click",function(){i.CHM(t);const n=i.oxw().$implicit,o=i.oxw();return i.KtG(o.verHistoriaClinica(n.mailPaciente))}),i._uU(1,"Ver Historia Cl\xednica"),i.qZA()}}function Q(s,c){if(1&s){const t=i.EpF();i.TgZ(0,"button",16),i.NdJ("click",function(){i.CHM(t);const n=i.oxw().$implicit,o=i.oxw();return i.KtG(o.verResenia(n.calificacionAtencion))}),i._uU(1,"Ver Rese\xf1a"),i.qZA()}}function S(s,c){if(1&s){const t=i.EpF();i.TgZ(0,"button",16),i.NdJ("click",function(){i.CHM(t);const n=i.oxw().$implicit,o=i.oxw();return i.KtG(o.verResenia(n.comentarioCancelacion))}),i._uU(1,"Ver Comentario"),i.qZA()}}function L(s,c){if(1&s&&(i.TgZ(0,"tr")(1,"td",6),i._uU(2),i.qZA(),i.TgZ(3,"td",6),i._uU(4),i.qZA(),i.TgZ(5,"td",6),i._uU(6),i.qZA(),i.TgZ(7,"td",6),i._uU(8),i.qZA(),i.TgZ(9,"td",7)(10,"div",8),i.YNc(11,I,2,0,"button",9),i.YNc(12,Y,2,0,"button",10),i.YNc(13,H,2,0,"button",11),i.YNc(14,j,2,0,"button",11),i.YNc(15,Q,2,0,"button",12),i.YNc(16,S,2,0,"button",12),i.qZA()()()),2&s){const t=c.$implicit;i.xp6(2),i.Oqu(t.especialidad),i.xp6(2),i.Oqu(t.paciente),i.xp6(2),i.hij("",t.diaDelTurno,"hs"),i.xp6(2),i.Oqu(t.estado),i.xp6(3),i.Q6J("ngIf","pendiente"==t.estado),i.xp6(1),i.Q6J("ngIf","pendiente"==t.estado),i.xp6(1),i.Q6J("ngIf","aceptado"==t.estado),i.xp6(1),i.Q6J("ngIf","finalizado"==t.estado),i.xp6(1),i.Q6J("ngIf",""!=t.calificacionAtencion),i.xp6(1),i.Q6J("ngIf",""!=t.comentarioCancelacion)}}let R=(()=>{class s{ngOnInit(){console.log(this.misTurnosEspecialista),this.obserHistoriasClinicas$=this.firebase.traerTodasLasHistoriasClinicas().subscribe(t=>{this.cargarHistoriasClinicas(t)})}ngOnDestroy(){this.obserHistoriasClinicas$&&this.obserHistoriasClinicas$.unsubscribe()}constructor(t,e){this.notificaciones=t,this.firebase=e,this.misTurnosEspecialista=[],this.historiasClinicas=[]}verResenia(t){var e=this;return(0,l.Z)(function*(){yield e.notificaciones.mostrarMensajeSwal("",t)})()}rechazarTurno(t){var e=this;return(0,l.Z)(function*(){if((yield e.notificaciones.mostrarConfirmacion("Rechazar Turno","\xbfEst\xe1s seguro de rechazar el turno?")).isConfirmed){let o=yield e.notificaciones.mostrarConfirmacionConTexto("Rechazar Turno","\xbfPor qu\xe9 est\xe1 rechazando el turno?");null==o&&(o="");let a="";e.firebase.rechazarTurnoPaciente(t.especialidad,t.especialista,t.paciente,o,t.diaDelTurno).then(r=>{a=r,"Se ha rechazado el turno"!=a?e.notificaciones.mostrarError("Error",a):e.notificaciones.mostrarExito("\xc9xito",a)})}})()}aceptarTurno(t){var e=this;return(0,l.Z)(function*(){if((yield e.notificaciones.mostrarConfirmacion("Aceptar Turno","\xbfEst\xe1s seguro de aceptar el turno?")).isConfirmed){let o="";e.firebase.aceptarTurnoPaciente(t.especialidad,t.especialista,t.paciente,t.diaDelTurno).then(a=>{o=a,"Se ha aceptado el turno"!=o?e.notificaciones.mostrarError("Error",o):e.notificaciones.mostrarExito("\xc9xito",o)})}})()}finalizarTurno(t){var e=this;return(0,l.Z)(function*(){if((yield e.notificaciones.mostrarConfirmacion("Finalizar Turno","\xbfEst\xe1s seguro de finalizar el turno?")).isConfirmed){let o=yield e.notificaciones.mostrarConfirmacionConTexto("Agrega Rese\xf1a","\xbfQue indicaciones debe seguir el paciente?"),a=yield e.notificaciones.mostrarFormularioHistoriaClinica(t.paciente),r={altura:a?.altura,peso:a?.peso,presion:a?.presion,temperatura:a?.temperatura,detalles:a?.detalles,mailPaciente:t.mailPaciente};null==o&&(o="");let d="";e.firebase.finalizarTurnoPaciente(t.especialidad,t.especialista,t.paciente,o,t.diaDelTurno).then(m=>{d=m,e.firebase.guardarHistoriaClinica(t.paciente,r),"Se ha finalizado el turno"!=d?e.notificaciones.mostrarError("Error",d):e.notificaciones.mostrarExito("\xc9xito",d)})}})()}cargarHistoriasClinicas(t){let e=[];t.length>0&&t.forEach(n=>{let o="";for(const r in n.detalles)n.detalles.hasOwnProperty(r)&&(o+=`${r}:${n.detalles[r]}`);e.push({altura:n.altura+" cm",paciente:n.paciente,peso:n.peso+" kg",presion:n.presion+" mmHg",temperatura:n.temperatura+" \xb0C",detalle:o,mailPaciente:n.mailPaciente})}),this.historiasClinicas=e}verHistoriaClinica(t){var e=this;return(0,l.Z)(function*(){let n=e.encontrarHistoriaPorMailPaciente(t);e.notificaciones.mostrarHistoriaClinica(n).then(o=>{})})()}descargarHistoriaClinica(t){var e=this;return(0,l.Z)(function*(){e.encontrarHistoriaPorMailPaciente(t.email)})()}encontrarHistoriaPorMailPaciente(t){let e;for(let n=0;n<this.historiasClinicas.length;n++)if(this.historiasClinicas[n].mailPaciente==t){e=this.historiasClinicas[n];break}return e}static#i=this.\u0275fac=function(e){return new(e||s)(i.Y36(_.U),i.Y36(f.O))};static#t=this.\u0275cmp=i.Xpm({type:s,selectors:[["app-tabla-turnos-especialista"]],inputs:{misTurnosEspecialista:"misTurnosEspecialista"},decls:18,vars:1,consts:[[1,"h-80","d-flex","justify-content-center","align-items-center","text-white","rounded-3"],[1,"text-center"],[1,"table-responsive"],[1,"table","table-bordered","table-hover","table-dark","align-middle"],["colspan","4"],[4,"ngFor","ngForOf"],[1,"table-dark"],["colspan","4",1,"table-dark"],[1,"d-flex","flex-column"],["class","btn btn-success mb-1",3,"click",4,"ngIf"],["class","btn btn-danger mb-1",3,"click",4,"ngIf"],["class","btn btn-primary mb-1",3,"click",4,"ngIf"],["class","btn btn-info mb-1",3,"click",4,"ngIf"],[1,"btn","btn-success","mb-1",3,"click"],[1,"btn","btn-danger","mb-1",3,"click"],[1,"btn","btn-primary","mb-1",3,"click"],[1,"btn","btn-info","mb-1",3,"click"]],template:function(e,n){1&e&&(i.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"table",3)(4,"thead")(5,"tr")(6,"td"),i._uU(7,"Especialidad"),i.qZA(),i.TgZ(8,"td"),i._uU(9,"Paciente"),i.qZA(),i.TgZ(10,"td"),i._uU(11,"Fecha y hora"),i.qZA(),i.TgZ(12,"td"),i._uU(13,"Estado del Turno"),i.qZA(),i.TgZ(14,"td",4),i._uU(15,"Acciones"),i.qZA()()(),i.TgZ(16,"tbody"),i.YNc(17,L,17,10,"tr",5),i.qZA()()()()()),2&e&&(i.xp6(17),i.Q6J("ngForOf",n.misTurnosEspecialista))},dependencies:[u.sg,u.O5],styles:['@import"https://fonts.googleapis.com/css2?family=Nunito:wght@500&display=swap";@import"https://fonts.googleapis.com/css2?family=DynaPuff&family=Sora&display=swap";td[_ngcontent-%COMP%]{color:#fff;font-family:Nunito,sans-serif;font-size:large}table[_ngcontent-%COMP%]{width:100%}']})}return s})();function G(s,c){if(1&s){const t=i.EpF();i.TgZ(0,"button",9),i.NdJ("click",function(){i.CHM(t);const n=i.oxw().$implicit,o=i.oxw();return i.KtG(o.cancelarTurno(n))}),i._uU(1,"Cancelar Turno"),i.qZA()}}function K(s,c){if(1&s&&(i.TgZ(0,"tr")(1,"td",5),i._uU(2),i.qZA(),i.TgZ(3,"td",5),i._uU(4),i.qZA(),i.TgZ(5,"td",5),i._uU(6),i.qZA(),i.TgZ(7,"td",5),i._uU(8),i.qZA(),i.TgZ(9,"td",6)(10,"div",7),i.YNc(11,G,2,0,"button",8),i.qZA()()()),2&s){const t=c.$implicit;i.xp6(2),i.Oqu(t.especialidad),i.xp6(2),i.Oqu(t.especialista),i.xp6(2),i.hij("",t.diaDelTurno,"hs"),i.xp6(2),i.Oqu(t.estado),i.xp6(3),i.Q6J("ngIf","false"==t.fueRealizado&&"rechazado"!=t.estado&&"aceptado"!=t.estado&&"finalizado"!=t.estado)}}let B=(()=>{class s{constructor(t,e){this.notificaciones=t,this.firebase=e,this.turnosDeLaClinica=[]}cancelarTurno(t){var e=this;return(0,l.Z)(function*(){if((yield e.notificaciones.mostrarConfirmacion("Cancelar Turno","\xbfEst\xe1s seguro de cancelar el turno?")).isConfirmed){let o=yield e.notificaciones.mostrarConfirmacionConTexto("Cancelar Turno","\xbfPor qu\xe9 est\xe1 cancelando el turno?");null==o&&(o="");let a="";e.firebase.cancelarTurnoPaciente(t.especialidad,t.especialista,t.paciente,o,t.diaDelTurno).then(r=>{a=r,"Se han cancelado el turno"!=a?e.notificaciones.mostrarError("Error",a):e.notificaciones.mostrarExito("\xc9xito",a)})}})()}verResenia(t){var e=this;return(0,l.Z)(function*(){yield e.notificaciones.mostrarMensajeSwal("",t)})()}calificarTurno(t){var e=this;return(0,l.Z)(function*(){let n=yield e.notificaciones.mostrarConfirmacionConTexto("Calificar Atenci\xf3n","\xbfQu\xe9 te pareci\xf3 el servicio?");null==n&&(n="");let o="";e.firebase.agregarCalificacionServicio(t.especialidad,t.especialista,t.paciente,n,t.diaDelTurno).then(a=>{o=a,"Se ha calificado el turno"!=o?e.notificaciones.mostrarError("Error",o):e.notificaciones.mostrarExito("\xc9xito",o)})})()}static#i=this.\u0275fac=function(e){return new(e||s)(i.Y36(_.U),i.Y36(f.O))};static#t=this.\u0275cmp=i.Xpm({type:s,selectors:[["app-turnos-admin"]],inputs:{turnosDeLaClinica:"turnosDeLaClinica"},decls:18,vars:1,consts:[[1,"h-80","d-flex","justify-content-center","align-items-center","text-white","rounded-3"],[1,"text-center"],[1,"table-responsive"],[1,"table","table-bordered","table-hover","table-dark","align-middle"],[4,"ngFor","ngForOf"],[1,"table-dark"],["colspan","4",1,"table-dark"],[1,"d-flex","flex-column"],["class","btn btn-danger mb-1",3,"click",4,"ngIf"],[1,"btn","btn-danger","mb-1",3,"click"]],template:function(e,n){1&e&&(i.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"table",3)(4,"thead")(5,"tr")(6,"td"),i._uU(7,"Especialidad"),i.qZA(),i.TgZ(8,"td"),i._uU(9,"Especialista"),i.qZA(),i.TgZ(10,"td"),i._uU(11,"Fecha y hora"),i.qZA(),i.TgZ(12,"td"),i._uU(13,"Estado del Turno"),i.qZA(),i.TgZ(14,"td"),i._uU(15,"Acciones"),i.qZA()()(),i.TgZ(16,"tbody"),i.YNc(17,K,12,5,"tr",4),i.qZA()()()()()),2&e&&(i.xp6(17),i.Q6J("ngForOf",n.turnosDeLaClinica))},dependencies:[u.sg,u.O5],styles:['@import"https://fonts.googleapis.com/css2?family=Nunito:wght@500&display=swap";@import"https://fonts.googleapis.com/css2?family=DynaPuff&family=Sora&display=swap";td[_ngcontent-%COMP%]{color:#fff;font-family:Nunito,sans-serif;font-size:large}table[_ngcontent-%COMP%]{width:100%}.rating-container[_ngcontent-%COMP%]{text-align:center;padding:20px}']})}return s})();function X(s,c){if(1&s&&i._UZ(0,"app-tabla-turnos-paciente",7),2&s){const t=i.oxw();i.Q6J("misTurnosPaciente",t.misTurnos)}}function V(s,c){if(1&s&&i._UZ(0,"app-tabla-turnos-especialista",8),2&s){const t=i.oxw();i.Q6J("misTurnosEspecialista",t.misTurnos)}}function W(s,c){if(1&s&&i._UZ(0,"app-turnos-admin",9),2&s){const t=i.oxw();i.Q6J("turnosDeLaClinica",t.misTurnos)}}let C=(()=>{class s{ngOnInit(){this.tipoUsuario=this.firebase.tipoUsuario}constructor(t){this.firebase=t,this.misTurnos=[],this.tipoUsuario="",this.flagHayCambio=!1}cargarMisTurnos(t){this.misTurnos=t}avisarCambio(t){t&&(this.flagHayCambio=!0)}static#i=this.\u0275fac=function(e){return new(e||s)(i.Y36(f.O))};static#t=this.\u0275cmp=i.Xpm({type:s,selectors:[["app-mis-turnos"]],decls:7,vars:3,consts:[[1,"row"],[1,"col-md-4"],[3,"eventItemMisTurnos"],[1,"col-md-8"],[3,"misTurnosPaciente",4,"ngIf"],[3,"misTurnosEspecialista",4,"ngIf"],[3,"turnosDeLaClinica",4,"ngIf"],[3,"misTurnosPaciente"],[3,"misTurnosEspecialista"],[3,"turnosDeLaClinica"]],template:function(e,n){1&e&&(i.TgZ(0,"div",0)(1,"div",1)(2,"app-filtro-unico",2),i.NdJ("eventItemMisTurnos",function(a){return n.cargarMisTurnos(a)}),i.qZA()(),i.TgZ(3,"div",3),i.YNc(4,X,1,1,"app-tabla-turnos-paciente",4),i.YNc(5,V,1,1,"app-tabla-turnos-especialista",5),i.YNc(6,W,1,1,"app-turnos-admin",6),i.qZA()()),2&e&&(i.xp6(4),i.Q6J("ngIf","paciente"==n.tipoUsuario),i.xp6(1),i.Q6J("ngIf","especialista"==n.tipoUsuario),i.xp6(1),i.Q6J("ngIf","admin"==n.tipoUsuario))},dependencies:[u.O5,A,z,R,B],styles:[".row[_ngcontent-%COMP%]{max-width:100vw;height:93vh;background-size:100% 100%;background-image:url(fondo-solicitar-turno.720eba8beca0c2af.png);background-repeat:no-repeat;display:flex;flex-direction:row;align-items:center;justify-content:center}"]})}return s})();const ii=[{path:"solicitar-turno",component:v,title:"Solicitar Turno - Cl\xednica"},{path:"mis-turnos",component:C,title:"Mis Turnos - Cl\xednica"},{path:"",component:C,title:"Todos los turnos - Cl\xednica"}];let ti=(()=>{class s{static#i=this.\u0275fac=function(e){return new(e||s)};static#t=this.\u0275mod=i.oAB({type:s});static#e=this.\u0275inj=i.cJS({imports:[g.Bz.forChild(ii),g.Bz]})}return s})(),ei=(()=>{class s{static#i=this.\u0275fac=function(e){return new(e||s)};static#t=this.\u0275mod=i.oAB({type:s});static#e=this.\u0275inj=i.cJS({imports:[u.ez,ti]})}return s})()}}]);